import { STORAGE_KEYS } from "@/storage/storageKeys";
import { loadStorage, writeStorage } from "@/storage/storageUtils";
import { ACTION_TYPES } from "../context/actionTypes"; // âœ… Ù…Ø³ÛŒØ± ØµØ­ÛŒØ­

export const updateContact = (dispatch) => (contact) => {
  const current = loadStorage(STORAGE_KEYS.CONTACT_LIST) || [];
  const updated = current.map((c) => (c.id === contact.id ? contact : c));

  // ðŸ§¼ Sideâ€‘Effect Ø¯Ø± Ù…Ø¯Ù„ B2: Ø§Ø¨ØªØ¯Ø§ ØªÙ…ÛŒØ² Ú©Ø±Ø¯Ù† storage
  writeStorage(STORAGE_KEYS.CONTACT_LIST, updated);

  // ðŸš€ Ø³Ù¾Ø³ dispatch
  dispatch({
    type: ACTION_TYPES.UPDATE_CONTACT_SUCCESS,
    payload: contact,
  });
};
