import React from "react";
import { useForm, FormProvider } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import { contactSchema } from "../schema/contactSchema";
import { InputField } from "./InputField";

export function ContactForm({ onSubmit }) {
  const methods = useForm({
    resolver: yupResolver(contactSchema),
    mode: "onBlur",
  });

  const handleSubmit = methods.handleSubmit(onSubmit);

  return (
    <FormProvider {...methods}>
      <form onSubmit={handleSubmit} className="contact-form">
        <InputField name="name" label="نام" />
        <InputField name="phone" label="شماره تماس" />
        <InputField name="email" label="ایمیل" type="email" />
        <button type="submit">ثبت تماس</button>
      </form>
    </FormProvider>
  );
}
