import { ACTION_TYPES } from "./actionTypes";
import { contactsInitialState } from "./contactsInitialState";


export const contactsReducer = (state, action) => {
switch (action.type) {
case ACTION_TYPES.UPDATE_CURRENT_CONTACT:
return {
...state,
currentContact: {
...state.currentContact,
[action.payload.field]: action.payload.value,
},
};


case ACTION_TYPES.SET_ERRORS:
return { ...state, errors: action.payload };


case ACTION_TYPES.CLEAR_ERRORS:
return {
...state,
errors: { firstName: "", lastName: "", email: "", phone: "" },
};


case ACTION_TYPES.SET_SEARCH:
return { ...state, search: action.payload };


case ACTION_TYPES.SET_SELECTED_IDS:
return { ...state, selectedIds: [...action.payload] };


case ACTION_TYPES.SET_EDITING_ID:
return { ...state, editingId: action.payload };


case ACTION_TYPES.TOGGLE_MODAL:
return { ...state, modal: { ...state.modal, ...action.payload } };


case ACTION_TYPES.CREATE_CONTACT_SUCCESS:
return {
...state,
contacts: [...state.contacts, action.payload],
};


case ACTION_TYPES.UPDATE_CONTACT_SUCCESS:
return {
...state,
contacts: state.contacts.map((c) =>
c.id === action.payload.id ? action.payload : c
),
editingId: null,
};


case ACTION_TYPES.DELETE_CONTACT_SUCCESS:
return {
...state,
contacts: state.contacts.filter((c) => c.id !== action.payload),
};


case ACTION_TYPES.DELETE_SELECTED_SUCCESS:
return {
...state,
contacts: state.contacts.filter(
({ id }) => !action.payload.includes(id)
),
selectedIds: [],
};


case ACTION_TYPES.RESET_STATE:
return contactsInitialState();


default:
return state;
}
};